{% extends 'front/base.html' %}
{% load static %}

{% block content %}
<section class="sidebar-page-container blog-standard">
    <div class="auto-container">
        <div class="row clearfix">
            <div class="col-lg-8 col-md-12 col-sm-12 content-side">
                <div class="blog-details-content">
                    <div class="comments-form-area">
                        <div class="group-title">
                            <h3>Quotation</h3>
                        </div>
                        <div class="form-inner">
                            <form method="post" action="" id="contact-form" class="default-form" enctype="multipart/form-data">
                                {% csrf_token %}
                                <div class="row clearfix">
                                    <!-- Quantity Needed (from RFQ) -->
                                    <div class="col-lg-6 col-md-6 col-sm-6 form-group">
                                        <label for="quantity_needed">Quantity Needed</label>
                                        <input type="number" id="quantity_needed" name="quantity_needed" value="{{ rfq.quantity_needed }}" class="form-control" readonly>
                                    </div>

                                    <!-- Unit Price -->
                                    <div class="col-lg-6 col-md-12 col-sm-6 form-group">
                                        <label for="unit_Price">Unit Price</label>
                                        {{ form.unit_Price }}
                                    </div>

                                    <!-- Total Price -->
                                    <div class="col-lg-6 col-md-6 col-sm-6 form-group">
                                        <label for="total_Price">Total Price</label>
                                        {{ form.total_Price }}
                                    </div>

                                    <!-- Discount Offer -->
                                    <div class="col-lg-6 col-md-6 col-sm-6 form-group">
                                        <label for="discount">Discount Offer</label>
                                        {{ form.discount }}
                                    </div>

                                    <!-- Payment Terms -->
                                    <div class="col-lg-6 col-md-6 col-sm-6 form-group">
                                        <label for="payment_terms">Payment Terms</label>
                                        {{ form.payment_terms }}
                                    </div>

                                    <!-- Document Upload -->
                                    <div class="col-lg-6 col-md-6 col-sm-6 form-group">
                                        <label for="document">Document</label>
                                        {{ form.document }}
                                    </div>

                                    <!-- Time Frame -->
                                    <div class="col-lg-6 col-md-6 col-sm-6 form-group">
                                        <label for="time_frame">Time Frame</label>
                                        {{ form.time_frame }}
                                    </div>

                                    <!-- Special Notes -->
                                    <div class="col-lg-6 col-md-6 col-sm-6 form-group">
                                        <label for="special_notes">Special Notes</label>
                                        {{ form.special_notes }}
                                    </div>

                                    <div class="col-lg-12 col-md-12 col-sm-12 form-group message-btn">
                                        <button class="theme-btn btn-one" type="submit" name="submit-form">Submit Now</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            {% include 'front/profile_slidebar.html' %}
        </div>
    </div>
</section>

<script>
    // Function to calculate total price based on unit price and quantity needed
    function calculateTotalPrice() {
        var unitPrice = parseFloat(document.getElementById('id_unit_Price').value) || 0;
        var quantityNeeded = parseInt(document.getElementById('quantity_needed').value) || 0;
        var totalPrice = unitPrice * quantityNeeded;
        document.getElementById('id_total_Price').value = totalPrice.toFixed(2);
    }

    document.getElementById('id_unit_Price').addEventListener('input', calculateTotalPrice);
    window.onload = calculateTotalPrice;
</script>

{% endblock %}
